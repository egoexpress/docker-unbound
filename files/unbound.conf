# Unbound configuration file.
# See unbound.conf(5) man page, version 1.5.4.

include: "/etc/unbound/unbound.conf.d/*.conf"

server:

	# verbosity number, 0 is least verbose. 1 is default.
	verbosity: {{VERBOSITY}}

	# print statistics to the log (for every thread) every N seconds.
	# Set to "" or 0 to disable. Default is disabled.
	statistics-interval: {{STATISTICS_INTERVAL}}

	# enable cumulative statistics, without clearing them after printing.
	statistics-cumulative: {{STATISTICS_CUMULATIVE}}

	# enable extended statistics (query types, answer codes, status)
	# printed from unbound-control. default off, because of speed.
	extended-statistics: {{EXTENDED_STATISTICS}}

	# number of threads to create. 1 disables threading.
	num-threads: {{NUM_THREADS}}

	# specify the interfaces to answer queries from by ip-address.
	# The default is to listen to localhost (127.0.0.1 and ::1).
	# specify 0.0.0.0 and ::0 to bind to all available interfaces.
	# specify every interface[@port] on a new 'interface:' labelled line.
	# The listen interfaces are not changed on reload, only on restart.
	# interface: 192.0.2.153
	# interface: 192.0.2.154
	# interface: 192.0.2.154@5003
	# interface: 2001:DB8::5
	interface: {{INTERFACE}} 

	# buffer size for UDP port 53 incoming (SO_RCVBUF socket option).
	# 0 is system default.  Use 4m to catch query spikes for busy servers.
	so-rcvbuf: {{SO_RCVBUFF}}

	# buffer size for UDP port 53 outgoing (SO_SNDBUF socket option).
	# 0 is system default.  Use 4m to handle spikes on very busy servers.
	so-sndbuf: {{SO_SNDBUF}}

	# use SO_REUSEPORT to distribute queries over threads.
	so-reuseport: {{SO_REUSEPORT}}

	# EDNS reassembly buffer to advertise to UDP peers (the actual buffer
	# is set with msg-buffer-size). 1480 can solve fragmentation (timeouts).
	edns-buffer-size: {{EDNS_BUFFER_SIZE}}

	# the amount of memory to use for the message cache.
	# plain value in bytes or you can append k, m or G. default is "4Mb".
	msg-cache-size: {{MSG_CACHE_SIZE}}

	# the amount of memory to use for the RRset cache.
	# plain value in bytes or you can append k, m or G. default is "4Mb".
	rrset-cache-size: {{RRSET_CACHE_SIZE}}

	# the time to live (TTL) value lower bound, in seconds. Default 0.
	# If more than an hour could easily give trouble due to stale data.
	cache-min-ttl: {{CACHE_MIN_TTL}}

	# the time to live (TTL) value cap for RRsets and messages in the
	# cache. Items are not cached for longer. In seconds.
	cache-max-ttl: {{CACHE_MAX_TTL}}

	# the time to live (TTL) value cap for negative responses in the cache
	cache-max-negative-ttl: {{CACHE_MAX_NEGATIVE_TTL}}

	# Enable IPv4, "yes" or "no".
	do-ip4: {{DO_IPV4}}

	# Enable IPv6, "yes" or "no".
	do-ip6: {{DO_IPV6}}

	# Enable UDP, "yes" or "no".
	do-udp: {{DO_UDP}}

	# Enable TCP, "yes" or "no".
	do-tcp: {{DO_TCP}}

	# Detach from the terminal, run in background, "yes" or "no".
	do-daemonize: no

	# control which clients are allowed to make (recursive) queries
	# to this server. Specify classless netblocks with /size and action.
	# By default everything is refused, except for localhost.
	# Choose deny (drop message), refuse (polite error reply),
	# allow (recursive ok), allow_snoop (recursive and nonrecursive ok)
	# deny_non_local (drop queries unless can be answered from local-data)
	# refuse_non_local (like deny_non_local but polite error reply).
	# access-control: 0.0.0.0/0 refuse
	# access-control: 127.0.0.0/8 allow
	# access-control: ::0/0 refuse
	# access-control: ::1 allow
	# access-control: ::ffff:127.0.0.1 allow
	access-control: 0.0.0.0/0 allow

	# if given, user privileges are dropped (after binding port),
	# and the given username is assumed. Default is user "unbound".
	# If you give "" no privileges are dropped.
	username: "unbound"

	# the log file, "" means log to stderr.
	# Use of this option sets use-syslog to "no".
	logfile: ""

	# Log to syslog(3) if yes. The log facility LOG_DAEMON is used to
	# log to, with identity "unbound". If yes, it overrides the logfile.
	use-syslog: no

	# file to read root hints from.
	# get one from ftp://FTP.INTERNIC.NET/domain/named.cache
	root-hints: "/etc/unbound/root.hints"

	# enable to not answer id.server and hostname.bind queries.
	hide-identity: {{HIDE_IDENTITY}}

	# enable to not answer version.server and version.bind queries.
	hide-version: {{HIDE_VERSION}}

	# Use 0x20-encoded random bits in the query to foil spoof attempts.
	# This feature is an experimental implementation of draft dns-0x20.
	use-caps-for-id: yes

	# if yes, perform prefetching of almost expired message cache entries.
	prefetch: yes

	# File with trusted keys, kept uptodate using RFC5011 probes,
	# initial file like trust-anchor-file, then it stores metadata.
	# Use several entries, one per domain name, to track multiple zones.
	#
	# If you want to perform DNSSEC validation, run unbound-anchor before
	# you start unbound (i.e. in the system boot scripts).  And enable:
	# Please note usage of unbound-anchor root anchor is at your own risk
	# and under the terms of our LICENSE (see that file in the source).
	auto-trust-anchor-file: "/etc/unbound/root.key"

# Python config section. To enable:
# o use --with-pythonmodule to configure before compiling.
# o list python in the module-config string (above) to enable.
# o and give a python-script to run.
python:
	# Script file to load
	# python-script: "/usr/local/etc/unbound/ubmodule-tst.py"

# Remote control config section.
remote-control:
	# Enable remote control with unbound-control(8) here.
	# set up the keys and certificates with unbound-control-setup.
	control-enable: yes

	# unbound server key file.
	server-key-file: "/etc/unbound/unbound_server.key"

	# unbound server certificate file.
	server-cert-file: "/etc/unbound/unbound_server.pem"

	# unbound-control key file.
	control-key-file: "/etc/unbound/unbound_control.key"

	# unbound-control certificate file.
	control-cert-file: "/etc/unbound/unbound_control.pem"
